[global]
  server string = samba
  map to guest = Bad User
  idmap config * : range = 3000-7999
  security = user
  client min protocol = SMB2
  client max protocol = SMB3
  server min protocol = SMB2
  # disable printing services
  load printers = no
  printing = bsd
  printcap name = /dev/null
  disable spoolss = yes

{{ range $data := $.Paths }}
[{{ $data.Name }}]
  path = {{ $data.Path }}
  comment = "{{ $data.Comment }}"
  {{ if $data.Anonymous  -}}
  browseable = yes
  writable = no
  read only = yes
  guest ok = yes
  force user = nobody
  force group = {{ $data.ForceGroup }}
  create mask = 0664
  directory mask = 0775
  {{ else -}}
  valid users = {{ $data.ForceUser }}
  browseable = yes
  writable = {{ $data.Writable }}
  read only = {{ $data.ReadOnly }}
  read list = {{ $data.ReadList }}
  write list = {{ $data.WriteList }}
  force group = {{ $data.ForceGroup }}
  {{ if eq $data.Writable "yes" -}}
  create mask = 0664
  directory mask = 2775
  inherit permissions = no
  map acl inherit = yes
  {{ end -}}
  {{ end -}}
  vfs objects = catia fruit streams_xattr acl_xattr
  ea support = yes
  fruit:resource = xattr
  fruit:metadata = stream
  fruit:aapl = yes
  fruit:posix_rename = yes
  fruit:encoding = native
  veto files = /.DS_Store/Thumbs.db/
  delete veto files = yes
{{ end }}
